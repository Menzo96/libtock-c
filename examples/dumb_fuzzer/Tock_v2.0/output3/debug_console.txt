/**********************************/

Code with subscribe systemcalls and printfs, no random number generation.

Corresponding code main.c.

It appears easily: in a few seconds, every time.

/**********************************/




[0] schedule[0x1:1] @0x41e35(0x2, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x2, 0x0, 0x0, 0x0)
[0] remove_pending_upcalls[0x60004:13] = 0 upcall(s) removed
[0] subscribe(0x60004, 13, @0x0, 0x0) = SubscribeFailure(NOSUPPORT, 0x0, 0)
[0] memop(1, 0x6c) = SuccessU32(536892924)
[0] read-only allow(0x1, 1, @0x20005190, 0x30) = AllowReadOnlySuccess(0x20005100, 2)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x30, 0x0) = Success
[0] yield. which: 1
subscribe: Operation or command is unsupported
[0] schedule[0x1:1] @0x41e35(0x30, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x30, 0x0, 0x0, 0x0)
[0] read-only allow(0x1, 1, @0x200050f0, 0x16) = AllowReadOnlySuccess(0x20005190, 48)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x16, 0x0) = Success
[0] yield. which: 1
Subscribe number: 13
[0] schedule[0x1:1] @0x41e35(0x16, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x16, 0x0, 0x0, 0x0)
[0] cmd(0x0, 1, 0x0, 0x0) = SuccessU32(32768)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(88629)
[0] remove_pending_upcalls[0x0:0] = 0 upcall(s) removed
[0] subscribe(0x0, 0, @0x40249, 0x0) = SubscribeSuccess(0x40249, 0)
[0] cmd(0x0, 6, 0x15a35, 0xc80) = SuccessU32(91829)
[0] yield. which: 1
[0] schedule[0x0:0] @0x40249(0x166b5, 0x166b5, 0x0, 0x0) = true
[0] function_call @0x40249(0x166b5, 0x166b5, 0x0, 0x0)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(91845)
[0] read-only allow(0x1, 1, @0x20005100, 0x2) = AllowReadOnlySuccess(0x200050f0, 22)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x2, 0x0) = Success
[0] yield. which: 1

[0] schedule[0x1:1] @0x41e35(0x2, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x2, 0x0, 0x0, 0x0)
[0] remove_pending_upcalls[0x60004:12] = 0 upcall(s) removed
[0] subscribe(0x60004, 12, @0x0, 0x0) = SubscribeFailure(NOSUPPORT, 0x0, 0)
[0] memop(1, 0x6c) = SuccessU32(536893032)
[0] read-only allow(0x1, 1, @0x20005190, 0x30) = AllowReadOnlySuccess(0x20005100, 2)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x30, 0x0) = Success
[0] yield. which: 1
subscribe: Operation or command is unsupported
[0] schedule[0x1:1] @0x41e35(0x30, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x30, 0x0, 0x0, 0x0)
[0] read-only allow(0x1, 1, @0x200050f0, 0x16) = AllowReadOnlySuccess(0x20005190, 48)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x16, 0x0) = Success
[0] yield. which: 1
Subscribe number: 12
[0] schedule[0x1:1] @0x41e35(0x16, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x16, 0x0, 0x0, 0x0)
[0] cmd(0x0, 1, 0x0, 0x0) = SuccessU32(32768)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(96033)
[0] remove_pending_upcalls[0x0:0] = 0 upcall(s) removed
[0] subscribe(0x0, 0, @0x40249, 0x0) = SubscribeSuccess(0x40249, 0)
[0] cmd(0x0, 6, 0x17721, 0xc80) = SuccessU32(99233)
[0] yield. which: 1
[0] schedule[0x0:0] @0x40249(0x183a2, 0x183a1, 0x0, 0x0) = true
[0] function_call @0x40249(0x183a2, 0x183a1, 0x0, 0x0)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(99250)
[0] read-only allow(0x1, 1, @0x20005100, 0x2) = AllowReadOnlySuccess(0x200050f0, 22)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x2, 0x0) = Success
[0] yield. which: 1

[0] schedule[0x1:1] @0x41e35(0x2, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x2, 0x0, 0x0, 0x0)
[0] remove_pending_upcalls[0x60004:11] = 0 upcall(s) removed
[0] subscribe(0x60004, 11, @0x0, 0x0) = SubscribeFailure(NOSUPPORT, 0x0, 0)
[0] memop(1, 0x6c) = SuccessU32(536893140)
[0] read-only allow(0x1, 1, @0x20005190, 0x30) = AllowReadOnlySuccess(0x20005100, 2)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x30, 0x0) = Success
[0] yield. which: 1
subscribe: Operation or command is unsupported
[0] schedule[0x1:1] @0x41e35(0x30, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x30, 0x0, 0x0, 0x0)
[0] read-only allow(0x1, 1, @0x200050f0, 0x16) = AllowReadOnlySuccess(0x20005190, 48)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x16, 0x0) = Success
[0] yield. which: 1
Subscribe number: 11
[0] schedule[0x1:1] @0x41e35(0x16, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x16, 0x0, 0x0, 0x0)
[0] cmd(0x0, 1, 0x0, 0x0) = SuccessU32(32768)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(103437)
[0] remove_pending_upcalls[0x0:0] = 0 upcall(s) removed
[0] subscribe(0x0, 0, @0x40249, 0x0) = SubscribeSuccess(0x40249, 0)
[0] cmd(0x0, 6, 0x1940d, 0xc80) = SuccessU32(106637)
[0] yield. which: 1
[0] schedule[0x0:0] @0x40249(0x1a08d, 0x1a08d, 0x0, 0x0) = true
[0] function_call @0x40249(0x1a08d, 0x1a08d, 0x0, 0x0)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(106653)
[0] read-only allow(0x1, 1, @0x20005100, 0x2) = AllowReadOnlySuccess(0x200050f0, 22)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x2, 0x0) = Success
[0] yield. which: 1

[0] schedule[0x1:1] @0x41e35(0x2, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x2, 0x0, 0x0, 0x0)
[0] remove_pending_upcalls[0x60004:10] = 0 upcall(s) removed
[0] subscribe(0x60004, 10, @0x0, 0x0) = SubscribeFailure(NOSUPPORT, 0x0, 0)
[0] memop(1, 0x6c) = SuccessU32(536893248)
[0] read-only allow(0x1, 1, @0x20005190, 0x30) = AllowReadOnlySuccess(0x20005100, 2)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x30, 0x0) = Success
[0] yield. which: 1
subscribe: Operation or command is unsupported
[0] schedule[0x1:1] @0x41e35(0x30, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x30, 0x0, 0x0, 0x0)
[0] read-only allow(0x1, 1, @0x200050f0, 0x16) = AllowReadOnlySuccess(0x20005190, 48)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x16, 0x0) = Success
[0] yield. which: 1
Subscribe number: 10
[0] schedule[0x1:1] @0x41e35(0x16, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x16, 0x0, 0x0, 0x0)
[0] cmd(0x0, 1, 0x0, 0x0) = SuccessU32(32768)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(110843)
[0] remove_pending_upcalls[0x0:0] = 0 upcall(s) removed
[0] subscribe(0x0, 0, @0x40249, 0x0) = SubscribeSuccess(0x40249, 0)
[0] cmd(0x0, 6, 0x1b0fb, 0xc80) = SuccessU32(114043)
[0] yield. which: 1
[0] schedule[0x0:0] @0x40249(0x1bd7b, 0x1bd7b, 0x0, 0x0) = true
[0] function_call @0x40249(0x1bd7b, 0x1bd7b, 0x0, 0x0)
[0] cmd(0x0, 2, 0x0, 0x0) = SuccessU32(114061)
[0] read-only allow(0x1, 1, @0x20005100, 0x2) = AllowReadOnlySuccess(0x200050f0, 22)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x2, 0x0) = Success
[0] yield. which: 1

[0] schedule[0x1:1] @0x41e35(0x2, 0x0, 0x0, 0x0) = true
[0] function_call @0x41e35(0x2, 0x0, 0x0, 0x0)
[0] read-only allow(0x1, 1, @0x200050f0, 0x12) = AllowReadOnlySuccess(0x20005100, 2)
[0] remove_pending_upcalls[0x1:1] = 0 upcall(s) removed
[0] subscribe(0x1, 1, @0x41e35, 0x0) = SubscribeSuccess(0x41e35, 0)
[0] cmd(0x1, 1, 0x12, 0x0) = Success
[0] yield. which: 1
Driver number: 0
[0] schedule[0x1:1] @0x41e35(0x12, 0x0, 0x0, 0x0) = true

panicked at 'Process dumb_fuzzer had a fault', kernel/src/process_standard.rs:287:17
	Kernel version release-1.6-1488-gbf54e789c

---| Debug buffer not empty. Flushing. May repeat some of last message(s):
[0] function_call @0x41e35(0x12, 0x0, 0x0, 0x0)
[0] remove_pending_upcalls[0x0:0] = 0 upcall(s) removed
[0] subscribe(0x0, 0, @0x0, 0x0) = SubscribeSuccess(0x40249, 0)
[0] memop(1, 0x6c) = Failure(NOMEM)

---| No debug queue found. You can set it with the DebugQueue component.

---| Cortex-M Fault Status |---
Data Access Violation:              true
Forced Hard Fault:                  true
Faulting Memory Address:            0x00000000
Fault Status Register (CFSR):       0x00000082
Hard Fault Status Register (HFSR):  0x40000000

---| App Status |---
ğ€ğ©ğ©: dumb_fuzzer   -   [Faulted]
 Events Queued: 0   Syscall Count: 328   Dropped Upcall Count: 0
 Restart Count: 0
 Last Syscall: Some(Memop { operand: 1, arg0: 108 })


 â•”â•â•â•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
 â•‘  Address  â”‚ Region Name    Used | Allocated (bytes)  â•‘
 â•š0x20006000â•â•ªâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             â”‚ â–¼ Grant        1332 |   1332          
  0x20005ACC â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             â”‚ Unused
  0x200057AC â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             â”‚ â–² Heap         3308 |   4108               S
  0x20004AC0 â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ R
             â”‚ Data            704 |    704               A
  0x20004800 â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ M
             â”‚ â–¼ Stack        2048 |   2048          
  0x20004000 â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             â”‚ Unused
  0x20004000 â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             .....
  0x00044000 â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ F
             â”‚ App Flash     16336                        L
  0x00040030 â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ A
             â”‚ Protected        48                        S
  0x00040000 â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ H

  R0 : 0x00000001    R6 : 0x00000000
  R1 : 0x00000001    R7 : 0x20005080
  R2 : 0x20005080    R8 : 0x20004AB8
  R3 : 0x00000014    R10: 0x00000000
  R4 : 0x20004558    R11: 0x0000000E
  R5 : 0x00041E35    R12: 0x200045F0
  R9 : 0x20004800 (Static Base Register)
  SP : 0x20004528 (Process Stack Pointer)
  LR : 0x00041D55
  PC : 0x000405C2
 YPC : 0x000405F0

 APSR: N 0 Z 0 C 1 V 0 Q 0
       GE 0 0 0 0
 EPSR: ICI.IT 0x00
       ThumbBit true 

 Total number of grant regions defined: 14
  Grant  0: --          Grant  5: 0x20005fdc  Grant 10: --        
  Grant  1: --          Grant  6: --          Grant 11: --        
  Grant  2: 0x20005fd0  Grant  7: 0x20005fe4  Grant 12: --        
  Grant  3: --          Grant  8: 0x20005fe8  Grant 13: --        
  Grant  4: 0x20005fd8  Grant  9: --        

 Cortex-M MPU
  Region 0: [0x20004000:0x20006000], length: 8192 bytes; ReadWrite (0x3)
    Sub-region 0: [0x20004000:0x20004400], Enabled
    Sub-region 1: [0x20004400:0x20004800], Enabled
    Sub-region 2: [0x20004800:0x20004C00], Enabled
    Sub-region 3: [0x20004C00:0x20005000], Enabled
    Sub-region 4: [0x20005000:0x20005400], Enabled
    Sub-region 5: [0x20005400:0x20005800], Enabled
    Sub-region 6: [0x20005800:0x20005C00], Disabled
    Sub-region 7: [0x20005C00:0x20006000], Disabled
  Region 1: [0x00040000:0x00044000], length: 16384 bytes; UnprivilegedReadOnly (0x2)
    Sub-region 0: [0x00040000:0x00040800], Enabled
    Sub-region 1: [0x00040800:0x00041000], Enabled
    Sub-region 2: [0x00041000:0x00041800], Enabled
    Sub-region 3: [0x00041800:0x00042000], Enabled
    Sub-region 4: [0x00042000:0x00042800], Enabled
    Sub-region 5: [0x00042800:0x00043000], Enabled
    Sub-region 6: [0x00043000:0x00043800], Enabled
    Sub-region 7: [0x00043800:0x00044000], Enabled
  Region 2: Unused
  Region 3: Unused
  Region 4: Unused
  Region 5: Unused
  Region 6: Unused
  Region 7: Unused

To debug, run `make debug RAM_START=0x20004000 FLASH_INIT=0x40059`
in the app's folder and open the .lst file.


